<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="BinaryUtils.js"></script>
</head>
<body>

<h1>Bitwise Operations</h1>

<table cellpadding = 20 border=1>
    <tr>
        <td>
            <h2>First Number (In Hex)</h2>
            0x<input type="text" id = "input1" size="32">
        </td>
        <td>
            <h2>Second Number (In Hex)</h2>
            0x<input type="text" id = "input2" size="32">
        </td>
    </tr>
    <tr>
        <td colspan=2>
            <button type = "button" onclick = "updateNumbers()">Update</button></td>
        </td>
    </tr>
    <tr>
        <td colspan=2>
            <div id="bitsTable"></div>
        </td>
    </tr>
</table>


<script>
    let input1 = document.getElementById("input1");
    let input2 = document.getElementById("input2");
    let bitsTable = document.getElementById("bitsTable");
    // Binary strings for both numbers
    let x = "";
    let y = "";
    let ans = "";
    let tableStr = "";
    
    function getButtonsOpStr() {
        let s = "<button type = \"button\" onclick = \"doAND()\">&</button>";
        s += "<button type = \"button\" onclick = \"doOR()\">|</button>";
        s += "<button type = \"button\" onclick = \"doXOR()\">^</button>";
        return s;
    }

    function makeTableRow(num, startCell) {
        if (startCell === undefined) {
            startCell = "";
        }
        let s = "<tr><td>" + startCell + "</td>";
        for (let i = 0; i < num.length; i++) {
            s += "<td><h2>&nbsp&nbsp"+num[i]+"&nbsp&nbsp</h2></td>";
        }
        s += "</tr>";
        return s;
    }

    function makeBinaryStringTable() {
        let s = "<table>";
        s += makeTableRow(x);
        s += makeTableRow(y, getButtonsOpStr());
        s += "<tr><td colspan="+(x.length+1)+"><hr></td></tr>";
        tableStr = s;
        bitsTable.innerHTML = tableStr + "</table>";
    }

    function doAND() {
        let result = "";
        for (let i = 0; i < x.length; i++) {
            let xi = parseInt(x[i]);
            let yi = parseInt(y[i]);
            if (xi*yi == 1) {
                result += "1";
            }
            else {
                result += "0";
            }
        }
        let s = tableStr;
        s += makeTableRow(result, "<h2>0x"+binaryToHex(result)+"</h2>");
        bitsTable.innerHTML = s + "</table>";
    }

    function doOR() {
        let result = "";
        for (let i = 0; i < x.length; i++) {
            let xi = parseInt(x[i]);
            let yi = parseInt(y[i]);
            if (xi == 1 || yi == 1) {
                result += "1";
            }
            else {
                result += "0";
            }
        }
        let s = tableStr;
        s += makeTableRow(result, "<h2>0x"+binaryToHex(result)+"</h2>");
        bitsTable.innerHTML = s + "</table>";
    }

    function doXOR() {
        let result = "";
        for (let i = 0; i < x.length; i++) {
            let xi = parseInt(x[i]);
            let yi = parseInt(y[i]);
            if ((xi+yi)%2 == 1) {
                result += "1";
            }
            else {
                result += "0";
            }
        }
        let s = tableStr;
        s += makeTableRow(result, "<h2>0x"+binaryToHex(result)+"</h2>");
        bitsTable.innerHTML = s + "</table>";
    }
    
    function updateNumbers() {
        x = hexToBinary(input1.value);
        y = hexToBinary(input2.value);
        let N = Math.max(x.length, y.length);
        while (x.length < N) {
            x = "0" + x;
        }
        while (y.length < N) {
            y = "0" + y;
        }
        makeBinaryStringTable();
    }
</script>


</body>
</html>
