<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

    <h1><a name = "base10ToBinary">Converting Base 10 To Binary</a></h1>
        <button type = "button" onclick = "new_base10Binary()" id="new_base10Binary">New Example</button></td></tr>

        <table cellpadding = 10 border = "1">
            <tr>
                <td><h2>Base 10</h2></td>
                <td><div id = "query_base10Binary"></div></td>
            </tr>
            <tr>
                <td>
                    <h2>Binary</h2>
                    <button type = "button" onclick = "checkBase10Binary()">Check</button></td>
                </td>
                <td><input type="text" id = "check_base10Binary" size="24"></input></td>
            </tr>
            <tr>
                <td><h2>Answer</h2></td>
                <td><div id="answer_base10Binary"></div></td>
            </tr>
        </table>


        <BR><BR><BR><HR>
        <h1><a name = "binaryToBase10">Converting Binary To Base 10</a></h1>
        <button type = "button" onclick = "new_binaryBase10()" id="new_binaryBase10">New Example</button></td></tr>

        <table cellpadding = 10 border = "1">
            <tr>
                <td><h2>Binary</h2></td>
                <td><div id = "query_binaryBase10"></div></td>
            </tr>
            <tr>
                <td>
                    <h2>Base 10</h2>
                    <button type = "button" onclick = "checkBinaryBase10()">Check</button></td>
                </td>
                <td><input type="text" id = "check_binaryBase10" size="24"></input></td>
            </tr>
            <tr>
                <td><h2>Answer</h2></td>
                <td><div id="answer_binaryBase10"></div></td>
            </tr>
        </table>




<script>
    let base10 = -1;
    let binary = "0";
    let query_base10Binary = document.getElementById("query_base10Binary");
    let check_base10Binary = document.getElementById("check_base10Binary");
    let answer_base10Binary = document.getElementById("answer_base10Binary");

    let query_binaryBase10 = document.getElementById("query_binaryBase10");
    let check_binaryBase10 = document.getElementById("check_binaryBase10");
    let answer_binaryBase10 = document.getElementById("answer_binaryBase10");

    function base10ToBinary(x) {
        let rem = x;
        let b = "";
        let place = 2;
        do {
            if (rem%place == 0) {
                b = "0" + b;
            }
            else {
                b = "1" + b;
            }
            rem -= rem%place;
            place *= 2;
        }
        while (rem > 0);
        return b;
    }

    function binaryToBase10(b) {
        let s = b.split("").reverse().join("");
        let place = 1;
        let x = 0;
        for (let i = 0; i < s.length; i++) {
            if (s[i] == "1") {
                x += place;
            }
            place *= 2;
        }
        return x;
    }

    function new_base10Binary() {
        base10 = Math.round(Math.random()*64);
        query_base10Binary.innerHTML = "<h2>" + base10 + "</h2>";
    }

    function new_binaryBase10() {
        binary = base10ToBinary(Math.round(Math.random()*64));
        query_binaryBase10.innerHTML = "<h2>" + binary + "</h2>";
        answer_binaryBase10.innerHTML = "";
        check_binaryBase10.value = "";
    }

    function makeBinaryTableStr(b) {
        let s = "";
        s += "<table border = 1 cellpadding=10><tr>";
        let place = Math.pow(2, b.length-1);
        for (let i = 0; i < b.length; i++) {
            s += "<td><h3>" + place + "</h3></td>";
            place /= 2;
        }
        s += "</tr><tr>";
        for (let i = 0; i < b.length; i++) {
            s += "<td><h3>" + b[i] + "</h3></td>";
        }
        s += "</tr></table>";
        return s;
    }

    function makeShowBinarySumStr(b, x) {
        let s = "<h2>";
        place = Math.pow(2, b.length-1);
        for (let i = 0; i < b.length; i++) {
            s += "<font color=red>" + b[i] + "</font>*<font color=green>" + place+"</font>";
            if (i < b.length - 1) {
                s += "+ ";
            }
            else {
                s += " = ";
            }
            place /= 2;
        }
        s + "</code><BR>"
        s += "<b>" + x + "</b></h2>";
        return s;
    }

    function checkBase10Binary() {
        if (base10 >= 0) {
            let b = check_base10Binary.value;
            let myans = binaryToBase10(b);
            if (myans == base10) {
                answer_base10Binary.innerHTML = "<h2><font color=green>Correct!</font></h2>";
            }
            else {
                b = base10ToBinary(base10);
                let s = "<h2><font color=red>Whoops!</font></h2>";
                s += base10 + " in binary is <BR><code><h3>";
                s += makeBinaryTableStr(b) + makeShowBinarySumStr(b, base10);
                answer_base10Binary.innerHTML = s;
            }
        }
    }

    function checkBinaryBase10() {
        if (binary.length > 0) {
            let x = parseInt(check_binaryBase10.value);
            let myans = base10ToBinary(x);
            if (myans == binary) {
                answer_binaryBase10.innerHTML = "<h2><font color=green>Correct!</font></h2>";
            }
            else {
                x = binaryToBase10(binary);
                let s = "<h2><font color=red>Whoops!</font></h2>";
                s += makeBinaryTableStr(binary) + makeShowBinarySumStr(binary, x);
                s += "<button type = \"button\" onclick = \"new_binaryBase10()\">Try another example</button>";
                answer_binaryBase10.innerHTML = s;
            }
        }
    }

</script>


</body>
</html>
